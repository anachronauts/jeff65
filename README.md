# jeff65

[![Build Status](https://travis-ci.org/jdpage/jeff65.svg?branch=master)](https://travis-ci.org/jdpage/jeff65)

*jeff65* is a compiler for the Commodore 64 and (perhaps in the future) other
6502-based computers. It is implemented in Python 3.6 (or newer) and will use
ca65 (part of [cc65](http://www.cc65.org/)) as its assembler, producing .prg
files (or .d64 disk images, if [VICE](http://vice-emu.sourceforge.net/) is also
installed).

*jeff65* includes a top-down parser which utilizes a concept of binding power.
The parser is based on ideas by Vaughan Pratt and is explained in detail in
[this effbot article](http://effbot.org/zone/simple-top-down-parsing.htm).
Contributors are encouraged to read this article before diving into the parser.

**note:** this project is currently in its early stages. Features discussed below
are largely the product of wishful thinking and may change at any time.

*jeff65* handles three kinds of file:

  - files in *gold* syntax, an imperative systems language for 6502-series
    processors,
  - files in *blum* syntax, for annotating units written in assembly language,
  - 6502 assembly files, which can be linked into *jeff65* projects with
    little-to-no fuss.

Invocation:

    usage: ./bin/jeff65 [-h] input_file

    positional arguments:
      input_file  the file to compile

    optional arguments:
      -h, --help  show this help message and exit


## Status

* Basic syntax definition: finished, needs formal documentation.
* Lexer / Tokenizer: finished.
* Stage 1 Parsing (AST Generation): 75% finished.
* Stage 2 Parsing (AST validation and traversal): 15% finished.
* Stage 3 Parsing (AST optimization): not planned (for now).
* 6502 ASM Code Generation: not yet begun.


## Licensing

The *jeff65* compiler itself is provided under the GPLv3 license; if you
distribute a modified version of the compiler, you must also make the source
code for your modified version available, as described in the license terms. A
copy of the GPLv3 license is included in `LICENSE.txt` in the source
distribution.

The standard library units and runtime library, whenever they get written, will
probably be provided either using the GPL with a linking exception, or under a
non-copyleft license.

Please note that cc65 and its runtime libraries are (at time of writing)
provided under the zlib license.


## Gold-syntax

Gold-syntax provides an imperative systems programming language for 6502-series
processors. Features of the processor are exposed in a friendly-but-powerful
way; it should be possible to understand what code will be generated by looking
directly at the source file.

Gold-syntax is not associated with the Gold parser framework.


## Blum-syntax

Blum-syntax is used to annotate units written directly in assembly, and also as
an intermediate output by the compiler. Details forthcoming as we dream them up.
